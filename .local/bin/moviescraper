#!/bin/sh
printf 'Enter movie name =>  '
read query
# remove punct and lowecase all letters
querylower=$(echo $query | awk '{print tolower($0)}' | sed 's/[[:punct:]]//g')
printf 'Enter release year =>  '
read release_query
append_link=$(echo $querylower $release_query)
movie=$(echo $append_link | sed -r 's/[A-Za-z0-9_]+/&-/g' | sed 's/ //g' | sed 's/.$//')
link='https://yts.mx/movies/'$movie
torrent=$(curl -s ${link} | grep 'yts.mx/torrent/download/' | awk '$2 ~ /^href=/  {print $0}' | awk  -F" " '{ $3=""; $1="";  print $0}' | sed 's/title="//g' | sed 's/Download //g' | sed 's/Torrent.*//' | grep -v ".WEB" | grep -v ".BluRay" | awk '!/720p/ || !a[/720p/]++'|awk '!/1080p/ || !a[/1080p/]++' |awk '!/2160p/ || !a[/2160p/]++' | awk '{print $1, $NF}' | uniq -u  > /tmp/link )
cut -c 7-  /tmp/link > /tmp/link2
cat /tmp/link2

